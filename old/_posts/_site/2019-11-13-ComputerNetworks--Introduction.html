<head>
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
            inlineMath: [['$','$']]
            }
        });
    </script>
</head>

<p>计算机网络和分布式系统（distributed system）这两个概念容易使人混淆。</p>

<p>分布式系统呈现给用户的是一个关联系统。一般来说，在用户看来，分布式系统只是一个模型或范型。通常在操作系统之上有 一层软件负责实现这个模型，这个软件就称为中间件（middleware）。<br />
在计算机网络中，这种一致性、模型以及软件都不存在。用户看到的是实际的机器， 系统并没有努力使这些机器看起来一样，或者试图使它们的行为保持一致。</p>

<p>实际上，分布式系统是建立在网络之上的软件系统。这个软件给予分布式系统以高度的凝聚力和透明性。因此，网络与分布式系统之间的区别在于软件（特别是操作系统），而不是硬件。</p>

<h2 id="使用计算机网络">使用计算机网络</h2>

<h4 id="商业应用">商业应用</h4>

<ul>
  <li>资源共享（resource sharing）<br />
一种称为虚拟专用 网络（VPN，Virtual Private Networks）的网络技术可以将不同地点的单个网络联结成一个扩展的网络。客户机-服务器模型（client-server model）。</li>
  <li>通信媒介（communication medium）</li>
</ul>

<h4 id="家庭应用">家庭应用</h4>

<p><img src="\images\image-20191113195851275.png" alt="image-20191113195851275" /></p>

<h4 id="移动用户">移动用户</h4>

<p><img src="\images\image-20191113200905016.png" alt="image-20191113200905016" /></p>

<h4 id="社会问题">社会问题</h4>

<h2 id="网络硬件">网络硬件</h2>

<h3 id="传输技术分类">传输技术分类</h3>

<p>从广义上讲，目前普遍使用的传输技术有两种，分别是广播式链路和点到点链路。</p>

<ul>
  <li>点到点（point-to-point）链路将一对单独的机器连接起来。短消息必须首先访问一个或多个中间机器，称为数据包或包（packet）。只有一个发送方和一个接收方， 有时候也称为单播unicasting。</li>
  <li>在一个广播网络上，通信信道被网络上的所有机器所共享；任何一台机器发出的数据包能被所有其他任何机器收到。每个数据包的地址字段指定了预期的接收方。当一 台机器收到一个数据包时，它要检查地址字段。如果包的目的地就是接收机器，则该机器要处理此数据包；如果包的目的地址是某台其他机器，则该机器就忽略此数据包。</li>
  <li>如果被传输的数据包带有这样的地址编码，网络中的每一台机器都将会接收该包，称为广播（boradcasting）有些广播系统给一组机器发送数据包的模式，称为组播（multicasting）。</li>
</ul>

<h3 id="网络尺度分类">网络尺度分类</h3>

<p><img src="\images\image-20191113201006427.png" alt="image-20191113201006427" /></p>

<h4 id="个域网panpersonal-area-network">个域网（PAN，Personal Area Network）</h4>

<p>蓝牙（bluetooth):主-从操作模式</p>

<h4 id="局域网lanlocal-area-network">局域网（LAN，Local Area Network）</h4>

<p>无线局域网 在大多数情况下，每台计算机与接入点（AP，Access Point）[无线路由器（wireless router） 或者基站（base station）]通信，它负责中继无线计算机之间的数据包，还负责中继无线计算机和 Internet 之间的数据包。<br />
无线局域网的一个标准称为 IEEE 802.11，俗称为 WiFi。它在可以从 11 Mbps 到几百个 Mbps 的速率运行</p>

<p>有线局域网，在性能的所有方面都超过了无线网络。通过电线或通过光纤发送信号比通过空气发送信号更容易。许多有线局域网的拓扑结构是以点到点链路为基础的。<br />
俗称以太网（Ethernet）的 IEEE 802.3 是迄今为止常见的一种有线局域网。每台计算机按照以太网协议规定的方式运行，通过一条点到点链路连接到交换机（switch）。这就是交换式以太网名字的由来。</p>

<h4 id="城域网manmetropolitan-area-network">城域网（MAN，Metropolitan Area Network）</h4>

<h4 id="广域网-wanwide-area-network">广域网 （WAN，Wide Area Network）</h4>

<p>有线广域网。专门运行用户程序的计算机称为主机（host），连接这些主机的网络其余部分称为通信子网 （communication subnet），或简称为子网（subnet）。子网的工作是把信息从一个主机携带到 另一个主机。<br />
在大多数广域网中，子网由两个不同组成部分：传输线路和交换元素。传输线路 （transmission line）负责在机器之间移动比特。它们可以是铜线、光纤，或甚至无线链路。交换元素 （switching element）或交换机（switch）是专用的计算机，负责连接两条或两条以上的传输线路。这些计算机现在常用的名称是路由器（router）</p>

<p>广域网和局域网区别：</p>

<ul>
  <li>通常在广域网中，主机和子网是由不同的人拥有和经营。</li>
  <li>广域网路由器通常连接不同类型的网络技术。</li>
  <li>广域网子网可以连接单个计算机，或者连接整个局域网。</li>
</ul>

<p>第一种广域网，公司把自己的办事处直接连接到 Internet，办事处之间可以通过虚拟链路相互连接，使用了底层 Internet 的容量。称为<strong>虚拟专用网络</strong>（VPN，Virtual Private Network）。<br />
VPN 优势： 提供了重用资源的灵活性。考虑添加第四个办事处就能看到这是多么的容易。<br />
VPN 缺点：缺乏对底层资源的控制。采用专用线路能获得的容量是明确的，使用 VPN可能会随 Internet 服务的变化而有所不同。</p>

<p>在第二种不同的广域网中，子网由公司负责运营。子网经营者称为网络服务提供商（network service provider），客户能给连接在同一个网络内的其他客户发送数据包，还与 Internet 的其他网络相连。这样的子网运营商称为 Internet 服务提供商（ISP，Internet Service Provider），相应的子网称为 <strong>ISP 网络</strong>（ISP network）。</p>

<p>在大多数广域网中，网络包含了许多传输线路，每条线路连接一对路由器。如果两个想通信的路由器没有共享同一条传输线路，它们必须通过其他路由器间接地进行通信。网络如何决定使用哪条路径的策略称为<strong>路由算法</strong> （routing algorithm）。每个路由器如何决定把一个数据包发送到哪个位置的策略称为<strong>转发算法</strong>（forwarding algorithm）</p>

<h4 id="互联网络">互联网络</h4>

<p>一组相互连接的网络称为互联网络（internetwork）或 互联网（internet）。<br />
全球范围的因特网（Internet）则通常用首字母大写来表示（这是一个特殊的互联网络）。</p>

<p>将两个或多个网络连接起来 并提供必要转换的机器，其硬件和软件方面的总称是网关（gateway）。工作在协议不同层次的网关是有所区别的。</p>

<h2 id="网络软件">网络软件</h2>

<h3 id="协议层次结构">协议层次结构</h3>

<p><strong>协议</strong>（protocol）是指通信双方就如何进行通信的一种约定。<br />
不同机器上构成相应层次的实体称为<strong>对等体</strong>（peer）。对等体为了实现彼此沟通使用协议来通信。<br />
<strong>接口</strong>（interface）定义了下层向上层提供哪些原语操作和服务。</p>

<p>每一层都将数据和控制信息传递给它的下一层，这样一直传递到低层。第 1 层下面是物理介质（physical medium），通过它进行实际的通信。</p>

<p>层和协议的集合称为<strong>网络体系结构</strong>（network architecture）。网络体系结构的规范必须包含足够的信息，以便实现者能遵守有关的协议。实现细节和接口规范不属于网络体系结构的内容，因为它们隐藏在机器内部，对于外界是不可见的。一个特定的系统所使用的一组协议，即每一层一个协议，称为<strong>协议栈</strong> （protocol stack）。网络体系结构、协议栈以及协议本身是本书的主要内容。</p>

<h3 id="层次设计问题">层次设计问题</h3>

<p><strong>可靠性</strong>是第一个设计问题。从接收到的信息中发现错误所用的一种机制是<strong>检错</strong>（error detection）编码；然后重新传输接收到的不正确信息。更强大的编码，还能<strong>纠错</strong> （error correction），即从初收到的可能不正确的比特中恢复正确的消息。这两种机制的工作都需要在被传的信息中添加冗余信息。<br />
另一个可靠性问题是找到通过网络的工作路径。在源和目的地之间经常存在多条路径， 而且在一个大型网络中可能有一些链路或路由器偶尔发生故障。网络应该能自动做出这种路由决策。这个主题就是所谓的<strong>路由</strong>（routing）。</p>

<p>第二个设计问题涉及<strong>网络演进</strong>。随着时间的推移，网络的增长越来越大，出现的新设计需要与现有网络连接。<br />
由于网络上有许多计算机，每一层在特定的消息中都需要一种机制来标识发送方和接收方。这种机制在下层和高层分别称为<strong>寻址</strong>（addressing）和<strong>命名</strong>（naming）。 网络增长的一个方面是不同的网络技术往往具有不同的限制。所有这些主题综合起来就是所谓的<strong>网络互联</strong>（internetworking）。<br />
网络规模变大时仍能工作良好的设计被说成是可扩展的（scalable）</p>

<p>第三个设计问题是<strong>资源分配</strong>。网络基于其底层的资源（比如传输线路的容量）向主机提供服务。许多网络设计根据主机的短期需求变化动态共享网络带宽，这种设计称为<strong>统计复用</strong>（statistical multiplexing）。这种复用可以用在低层次的单条链路上、或者较高层次的网络层，甚至用在网络的应用层上。<br />
在每一层都会发生的一个分配问题是，如何保证快速发送方不会用数据把慢速接收方淹没。这个问题的解决经常使用了从接收方到发送方的反馈机制。这个主题就是<strong>流量控制</strong> （flow control）。有的时候还会出现网络超载问题，因为太多的计算机要发送太多的流量， 而网络又没有能力传递所有的数据包。这样的网络超载称为<strong>拥塞</strong>（congestion）。<br />
<strong>服务质量</strong>（Queality of service）是给予调和实时（real-time）传递或高吞吐量的应用程序竞争需求机制的名称。</p>

<p>后一个主要的设计问题是如何<strong>保护网络</strong>抵御各种不同的威胁。我们前面提到的一种威胁是通信窃听。提供<strong>保密性</strong>（confidentiality）的机制能抵御这种威胁，并且它们可被用 在多个层次。<strong>认证</strong>（authentication）机制防止有人假冒他人身份。<strong>完整性</strong>（integrity）机制则可以防止消息发生诡秘的变化。所有 这些设计都基于加密技术。</p>

<h3 id="面向连接与无连接服务">面向连接与无连接服务</h3>

<p><strong>面向连接的服务</strong>（connection-oriented service）是按照电话系统建模的。使用面向连接的网络服务，服务用户首先必须建立一个连接，然后使用该连接传输数据，后释放该连接。在绝大多数情况下，数据位保持原来的顺序，所以数据位都会按照发送的顺序到达。 在有些情况下，当建立一个连接时，发送方、接收方和子网一起<strong>协商</strong>（negotiation）一 组将要使用的参数，比如大的消息长度、所要求的服务质量以及其他一些问题。电路（circuit） 是与资源关联的连接的另一个名字，比如具有固定的带宽。</p>

<p><strong>无连接服务</strong>（conncetionless service），这是按照邮政系统建 模的。数据包/包 （packet）携带了完整的目标地址，都由系统中的中间节点路由，而且路由独立于后续数据包/包 （packet）。中间节点只能在收到报文的全部内容之后再将该报文发送给下一个节点的处理方式为<strong>存储-转发交换</strong>（store-and-forward switching）。在报文还没有被全部接收完毕之前就向下一个节点传输的处理方式称为<strong>直通式交换</strong>（cut-through switching）。</p>

<p>每个服务都可以用一个<strong>服务质量</strong>（quality of service）来表述其特征。有些服务是可靠 的，意味着它们从来不丢失数据。</p>

<p>可靠的面向连接服务有两个细微的变异形式：<strong>报文序列和字节流</strong>。报文序列中，报文的边界始终得到保持。字节流中，没有任何报文边界。</p>

<p>不可靠（意味着没有被确认）的无连接服务通常称为数据报服务（datagram service）。<br />
有确认的数据报服务（acknowledged datagram service）满足可靠性，当发送方收到回执时可绝对相信这封信已经被送到对方手中。<br />
请求-应答服务（request-reply service）发送方传输一个包含了某个请求的数据报；接受方以一个包含了请求结果的应答数据报作为反馈。</p>

<p><img src="\images\image-20191113215828374.png" alt="image-20191113215828374" /></p>

<h3 id="服务原语">服务原语</h3>

<p>一个服务由一组<strong>原语</strong>（primitive）正式说明，用户进程通过这些原语（操作）来访问该服务。原语告诉服务要执行某个动作，或者将对等实体所执行的动作报告给用户。</p>

<p><img src="\images\image-20191113221014057.png" alt="image-20191113221014057" /></p>

<h3 id="服务与协议的关系">服务与协议的关系</h3>

<p>服务是指某一层向它上一层提供的一组原语（操作）。服务定义了该层准备代表其用户执行哪些操作。服务与两层之间的接口有关，低层是服务提供者，而上层是服务用户。</p>

<p>协议是一组规则，规定了同一层上对等实体之间所交换的数据包或者报文的格式和含义。对等实体利用协议来实现它们的服务定义，它们可以自由地改变协议， 只要不改变呈现给它们用户的服务即可。</p>

<p><img src="\images\image-20191113221213928.png" alt="image-20191113221213928" /></p>

<h2 id="参-考-模-型">参 考 模 型</h2>

<h3 id="osi-参考模型">OSI 参考模型</h3>

<p>OSI 模型有 7 层。基本原则简要概括如下。</p>

<ol>
  <li>应该在需要一个不同抽象体的地方创建一层。</li>
  <li>每一层都应该执行一个明确定义的功能。</li>
  <li>每一层功能的选择应该向定义国际标准化协议的目标看齐。</li>
  <li>层与层边界的选择应该使跨越接口的信息流小。</li>
  <li>层数应该足够多，保证不同的功能不会被混杂在同一层中，但同时层数又不能太 多，以免体系结构变得过于庞大。</li>
</ol>

<p><img src="\images\image-20191113221335009.png" alt="image-20191113221335009" /></p>

<h4 id="物理层physical-layer">物理层（physical layer）</h4>

<p>关注在一条通信信道上传输原始比特。<br />
设计问题必须确保当一 方发送了比特 1 时，另一方收到的也是比特 1，而不是比特 0。<br />
典型问题包括用什么电子信号来表示 1 和 0、一个比特持续多少纳秒、传输是否可以在两个方向上同时进行、 初始连接如何建立、当双方结束之后如何撤销连接、网络连接器有多少针以及每一针的用途是什么等。这些设计问题主要涉及机械、电子和时序接口，以及物理层之下的物理传输介质等。</p>

<h4 id="数据链路层data-link-layer">数据链路层（data link layer）</h4>

<p>将一个原始的传输设施转变成一条没有错误的线路。<br />
数据链路层完成这项任务的做法是将真实的错误掩盖起来，使得网络层看不到。发送方将输入的数据拆分成数据帧（data frame），然后顺序发送这些数据帧。如果服务是可靠的，则接收方给发送方发回一个确认帧（acknowledgement frame）。 <br />
数据链路层（和大多数高层都存在）的另一个问题是如何避免一个快速发送方用数据 “淹没”一个慢速接收方。需要一种流量调节机制，让发送方知道接收方何时可以接收更多的数据。 <br />
广播式网络的数据链路层还有另一个问题：如何控制对共享信道的访问。数据链路层的一个特殊子层，即介质访问控制子层，就是专门处理这个问题的。</p>

<h4 id="网络层network-layer">网络层（network layer）</h4>

<p>控制子网的运行。<br />
关键的设计问题是如何将数据包从源端路由到接收方。</p>

<ul>
  <li>路由可以建立在静态表的基础上，这些表相当于网络内部的“布线”，而且很少会改变；</li>
  <li>或者，路由可以自动更新，以此来避免网络中的故障组件。</li>
  <li>路由也可以在每次会话开始时就确定下来，比如登录到一台远程机器上。</li>
  <li>路由可以是高度动态的，针对每一个数据包都重新确定路径， 以便反映网络当前的负载情况。</li>
</ul>

<p><strong>处理拥塞</strong>也是网络层的责任，一般要和高层协议结合起来综合处理拥塞才有效。更普遍的是网络所提供的<strong>服务质量</strong> （延迟、传输时间、抖动等）也是网络层的问题。 网络层应该解决问题允许异构网络相互连接成为<strong>互联网络</strong>。  <br />
在广播式网络中，路由问题比较简单，所以网络层往往比较单薄，甚至根本不存在。</p>

<h4 id="传输层transport-layer">传输层（transport layer）</h4>

<p>接收来自上一层的数据，在必要的时候把这些数据分割成较小的单元，然后把这些数据单元传递给网络层，并且确保这些数据单元正确地到达另一端。<br />
这些工作都必须高效率同时以一种上下隔离的方式完成，即随着时间的推移导致底层硬件技术不可避免地发生改变时，对上面各层是透明的。 传输层还决定了向会话层提供哪种类型的服务。服务的类型是在建立连接时就确定下来的。</p>

<p>传输层是真正的端-端的层，它将数据从源端携带到接收方。在其下面的各层，每个协议涉及一台机器与它的直接邻居，而不涉及终的源机器和目标机器。第 1 层到第 3 层是链式连接的，而第 4 层到第 7 层是端-端的。</p>

<h4 id="会话层session-layer">会话层（session layer）</h4>

<p>允许不同机器上的用户建立会话。会话通常提供各种服务，包括</p>

<ul>
  <li>对话控制（dialog control）：录该由谁来传递数据</li>
  <li>令牌管理（token management）：禁 止双方同时执行同一个关键操作</li>
  <li>同步功能（synchronization）：在一个长传输过程中设置一些断点，以便在系统崩溃之后还能恢复到崩溃前的状态继续运行</li>
</ul>

<h4 id="表示层presentation-layer">表示层（presentation layer）</h4>

<p>表示层以下的各层关注的是如何传递数据位，表示层（presentation layer）关注的是所传递信息的语法和语义。不同的计算机可能有不同的内部数据表示法，为了让这些计算机能够进行通信，它们所交换的数据结构必须以一种抽象的方式来定义，同时定义一种“线上”使用的标准编码方法。</p>

<h4 id="应用层application-layer">应用层（application layer）</h4>

<p>包含了用户通常需要的各种各样的协议。一个得到广泛使用的应用协议是超文本传输协议（HTTP，HyperText Transfer Protocol），它是万维网（WWW， World Wide Web）的基础。</p>

<h3 id="tcpip-参考模型">TCP/IP 参考模型</h3>

<p>TCP/IP 参考模型（TCP/IP Reference Model）其中两个主要的协议命名。</p>

<ul>
  <li>以无缝的方式将多个网络连接起来</li>
  <li>即使在损失子网硬件的情况下网络还能够继续工作，原有的会话不能被打断。</li>
  <li>由于当时设想不同应用程序对网络的需求差别很大，需要一种灵活的网络体系结构。</li>
</ul>

<h4 id="互联网层internet-layer">互联网层（internet layer）</h4>

<p>是将整个网络体系结构贯穿在一起的关键层。它大致对应于OSI 的网络层。<br />
允许主机将数据包注入到任何网络，并且让这些数据包独立地到达接收方（接收方可能在不同的网络上）。</p>

<p>可以把互联网层比喻为邮政系统。互联网层定义了官方的数据包格式和协议，该协议称为因特网协议（IP，Internet Protocol），与之相伴的还有一个辅助协议，称为因特网控制报文协议（ICMP，Internet Control Message Protocol）。互联网层的任务是将 IP 分组投递到它们该去的地方。数据包的路由是这里主要的问题，同时该层还要考虑拥塞控制问题</p>

<h4 id="传输层">传输层</h4>

<p>允许源主机和目标主机上的对等实体进行对话，定义了两个端-端的传输协议。<br />
第一个是传输控制协议（TCP，Transport Control Protocol），它是一个可靠的、面向连接的协议，允许从一台机器发出的字节流正确无误地交付到互联网上的另一台机器。TCP 还负责处理流量控制，以便确保一个快速的发送方不会因发送太多的报文而淹没掉一个处理能力 跟不上的慢速接收方。 <br />
传输层的第二个协议是用户数据报协议（UDP，User Datagram Protocol），它是一个不可靠的、无连接协议， 被广泛应用于那些一次性的基于客户机-服务器类型的“请求应答”查询应用，以及那些及时交付比精确交付更加重要的应用。</p>

<h4 id="应用层">应用层</h4>

<p>包含了所需的任何会话和表示功能。包含了所有的高层协议，包括虚拟终端协议（TELNET）、文件传输协议（FTP）和电子邮件协议（SMTP）等。</p>

<h3 id="本书使用的模型">本书使用的模型</h3>

<p>这个模型有 5 层，从物理层往上穿过链路层、网络层和 传输层到应用层。</p>

<ul>
  <li>物理层规定了如何在不同的介质上以电气 （或其他模拟）信号传输比特。</li>
  <li>链路层关注的是如何在两台 直接相连的计算机之间发送有限长度的消息，并具有指定级别的可靠性。以太网和 802.11 是链路层协议的例子。</li>
  <li>网络层主要处理如何把多条链路结合到网络中，以及如何把网络与网络联结成互联网络，以便使我们可以在两个相隔遥远的计算机之间发送数据包。网络层的任务包括找到传递数据包所走的路径。IP 是我们将要学习的网络层主要协议案例。</li>
  <li>传输层增强了网络层的传递保证，通常具有更高的可靠性，而且提供了数据交付的抽象，比如满足不同应用需求的可靠字节流。TCP 是传输层协议的一个重要实例。</li>
  <li>应用层包含了使用网络的应用程序。我们关心的是应用程序中使用网络的那部分程序。在 Web 浏览器的情况下就是 HTTP 协议。应用层也有重要的支撑程序供许多其他应用程序使用，比如 DNS。</li>
</ul>

<h3 id="osi-参考模型与-tcpip-参考模型的比较">OSI 参考模型与 TCP/IP 参考模型的比较</h3>

<p>OSI 模型的核心是如下 3 个概念：</p>

<ol>
  <li>服务。</li>
  <li>接口。</li>
  <li>协议。</li>
</ol>

<p>OSI 参考模型在协议发明之前就已经产生了。这种顺序关系意味着 OSI 模型不会偏向于任何一组特定的协议，更具有通用性。但这种做法也有缺点，对于每一层应该设置哪些功能没有特别好的主意。</p>

<p>而 TCP/IP 却正好相反：先有协议，TCP/IP 模型只是已有协议的一个描述而已。协议与模型高度吻合，而且两者结合得非常完美。问题在于TCP/IP 模 型并不适合任何其他协议栈。</p>

<p>OSI 模型的网络层同时支持无连接和面向连接的通信，但是传输层只支持面向连接的通信。<br />
TCP/IP 模型在网络层只支持一种模式（无连接）， 但是在传输层同时支持两种通信模式，这种选择机会对于简单的“请求-应答”协议特别重要。</p>

<h3 id="osi-模型和协议的评判">OSI 模型和协议的评判</h3>

<ul>
  <li>Bad timing.</li>
  <li>Bad technology.</li>
  <li>Bad implementations.</li>
  <li>Bad politics.</li>
</ul>

<h3 id="tcpip-参考模型的评判">TCP/IP 参考模型的评判</h3>

<ul>
  <li>该模型并没有明确区分服务、接口和协议的概念。</li>
  <li>TCP/IP 模型一点也不通用，它并不适合于用来描述 TCP/IP 之外的任何其他协议栈。</li>
  <li>链路层并不是通常意义上的一层。它是一个接口（位于网络层和数据链路层之间）</li>
  <li>TCP/IP 模型并没有区分物理层和数据链路层。这是两个完全不同的层。</li>
  <li>尽管 IP 和 TCP 协议进行了仔细设计，并且很好地实现了，但是还有很多其他 协议是自主形成的。随着时间的推移，现在这些协议反而成了一种障碍。</li>
</ul>

<h2 id="网络实例">网络实例</h2>

<h3 id="因特网">因特网</h3>

<p>因特网（Internet）并不是单个网络，而是大量不同网络的集合，这些网络使用特定的公共协议，并提供特定的公共服务。</p>

<h4 id="arpanet">ARPANET</h4>

<p>在当时，军事通信都使用公共电话网络，一旦几个关键的长途局遭到破坏，则整个系统有可能被分割成多个孤岛。</p>

<p>ARPANET 子网由一些小型机组成，这些小型机称为接口报文处理器（IMP，Interface Message Processors）。每个 IMP 至少与两个其他 IMP 连接。子网采用数据报技术，所以，如果有一些线路或者 IMP 被毁坏， 报文能被自动地重新路由到其他替代的路径上。</p>

<p>软件分成两部分：子网和主机。子网软件包括主机-IMP连接的 IMP 端、IMP-IMP 协议以及一个源 IMP-目标 IMP 的协议，后者是专门为提高传输可靠性而设计的。</p>

<p>随着网络规模的增长，寻找主机所需要的开销越来越昂贵，所以创建了域名系统（DNS，Domain Name System）。DNS 将机器组织成域，并且将主机名字映射成 IP 地址。</p>

<h4 id="nsfnet">NSFNET</h4>

<p>NSF 最初想在 1981 年建设一个计算机科学网络（CSNET，Computer Science Network）将全美国大学的计算机系和工业研究实验室通过拨号和租用线路连到 ARPANET，最后决定设计一个 ARPANET 的继任网络，对所有大学的研究组都开放。</p>

<p>为了使传输更加容易，确保每一个区域网络都可以与每一个其他区域网络进行通信，NSF 与 4 个网络运行商签订合同，建立网络接入点（NAP，Network Access Point）。</p>

<h4 id="internet-的体系结构">Internet 的体系结构</h4>

<p>电信融合：一个网络有了从前不同的应用。</p>

<p>为了加入 Internet，计算机必须连到 Internet 服务提供商或简称为 ISP</p>

<p>数字用户线（DSL，Digital Subscriber Line）重复使用连到各家的电话线进行数字数据的传输。<br />
计算机与 DSL 调制解调器的设备连接。设备将数字数据包转换成通过电话线传递的模拟信号。在另一端，一台称为数字用户线接入复用器（DSLAM，Digital Subscriber Line Access Multiplexer）的设备负责模拟信号和数字数据包之间的转换。</p>

<p>调制解调器（modem）指一数字比特和模拟信号之间作转换的设备</p>

<p>也可以利用有线电视没有使用的信道来发送信号。家庭端的设备称为线缆调制解调器，而在有线电视电缆（简称线缆）头端的设备称为线缆调制解调终端系统 （CMTS，Cable Modem Termination System）。</p>

<p>以高于拨号速率接入 Internet 就被称为宽带（broadband）。宽带是指更快网络所用的更宽的带宽，而不是指任何特定的速度。</p>

<p>客户数据包进入 ISP 网络使用其服务的位置称为 ISP 存点（POP，Point of Presence）。从这个位置开始，系统就完全是数字化的，而且采用的是数据包交换技术。</p>

<p>位于提供 ISP 服务所在的不同城市的 POP的路由器称为 ISP 骨干（backbone）。</p>

<p>ISP 将它们的网络连接到 Internet 交换点（IXP，Internet eXchange Point）以便交换流量。相互连接的 ISP 被认为彼此对等（peer）。</p>

<p>提供大量内容的公司把它们的计算机放在数据中心（data center），与 Internet 其余部分有很好的连接。代管（colocation）或托管（hosting） 数据中心让客户把诸如服务器之类的设备放在 ISP 的 POP，以便在服务器与 ISP 骨干之间形成短程的快速连接。</p>

<h3 id="第三代移动电话网络">第三代移动电话网络</h3>

<p>第一代移动电话系统以连续变化的<strong>模拟信号</strong>而非数字序列来传输语音通话。高级移动电话系统（AMPS，Advanced Mobile Phone System）是一种得到广泛使用的第一代系统</p>

<p>第二代移动电话系统从模拟传输切换到<strong>以数字形式传输</strong>语音通话，增加了容量，安全性提高，提供短信服务。全球移动通信系统（GSM，Global System for Mobile communications）属于 2G 系统。</p>

<p>第三代或 3G 系统能同时提供数字语音和宽带数字数据服务。通用移动通信系统（UMTS，Universal Mobile Telecommunications System）也称为宽带码分多址（WCDMA，Wideband Code Division Multiple Access），是主要的 3G 系统。</p>

<p>3G 系统和之前的 2G 和 1G 系统一样，稀缺的资源依然是无线电频谱。</p>

<p>系统的覆盖区域被分成一个个蜂窝。在一个蜂窝内，为用户分配互相不干扰的信道，而且分配的信道对相邻蜂窝也不能干扰太大。这样的频率分配方法使得频谱得以很好的重复使用，即频率重用， 增加了整个网络的容量。现代的 3G 系统允许每个蜂窝使用全部的频率，以一种允许相邻蜂窝之间存在可接受干扰程度的方式来分配频率。</p>

<p>蜂窝基站和它的控制器一起构成了无线接入网络（radio access network）。这部分是移 动电话网络的无线一则。控制器节点或无线网络控制器（RNC，Radio Network Controller） 控制如何使用无线电频谱。移动电话网络的其余部分负责运载无线接入网络的流量。这就是所谓的核心网络（core network）</p>

<p><img src="\images\image-20191114145400318.png" alt="image-20191114145400318" /></p>

<p>电路阵营来自电话公司。它在容错性方面不如无连接设计。优点是它们可以更容易支持服务质量。</p>

<p>在无连接网络中，可能丢失数据包，相应的服务质量将忽好忽坏，不适合音频或视频传输.</p>

<p>当用户移动出一个蜂窝基 站的覆盖范围进入到另一个蜂窝基站的覆盖范围时，数据流必须从旧蜂窝基站重新路由到 新蜂窝基站。这种技术称为<strong>移交</strong>（handover）或切换（handoff）。当信号质量下降时移动设备或基站都可能请求移交。在一些基于 CDMA 技术的蜂窝网 络中，有可能在与旧基站连接断开之前就连接到新基站，称为<strong>软切换</strong>（soft handover）。<strong>硬切换</strong>（hard handover）则是移动用户先与旧的基站断开连接，然后再与新基站建立连接。</p>

<p>每个移动电话网络在<strong>核心网络</strong>中维持一个归属用户服务器（HSS，Home Subscriber Server）， 该服务器知道每个用户的位置，以及其他用于身份验证和授权的个人资料信息，当有入境呼叫（即来电）时可以通过联系 HSS 来找到每个移动用户。</p>

<p>从 2G 的 GSM 系统开始，移动电话分为手机和一个可移动的芯片两部分，可移动芯片包含了用户的身份和账户信息，被非正式地称为 SIM 卡（SIM card）用户识别模块（Subscriber Identtity Module）的简称。 用 SIM 卡上的加密密钥对传输的通话进行加密。</p>

<h3 id="无线局域网80211">无线局域网：802.11</h3>

<p>无线局域网标准被冠以 802.11，常用俚语是 WiFi。运行在无需授权的频段上。</p>

<p>802.11 网络由客户和称为接入点（AP，Access Point） 的基础设施组成。AP 被安装在建筑物内，有时也称为基站（base station）。接入点连接到有线网络上，客户之间的通信通过接入点进行。客户也可以与位于无线电范围内的其他客户直接交谈，称为自组织网络（ad hoc network）。</p>

<p>问题：</p>

<p>在所使用的 802.11 频率上，无线电信号可以被反射， 使得一个传输的多个回波沿不同的路径到达接收器，回波可能相互抵消或互为因果， 造成接收到的信号出现大幅波动，称为<strong>多径衰落</strong>（multipath fading）</p>

<p>克服这种可变无线环境的关键想法是<strong>路径的多样性</strong>（plath diversity）沿多条独立的路径发送信息。即使由于衰落造成其中一条路径上的无线条件变差，接收器还是有可能收到信息。调制方案的选项包括使用整个允许频段中的不同频率、遵循不同天线之间的不同空中路径，或者在不同时间段内重复比特。</p>

<p>初标准（1997）定义的无线局域网采用频率跳跃或将信号扩展到所允许频谱的方法。<br />
扩频设计得到进一步扩展，并成为运行速率 高达 11Mbps 的 802.11b 标准（1999 年），新标准切换到了正交频分复用（OFDM，Orthogonal Frequency Division Multiplexing）</p>

<p>由于无线本质上是一种广播介质，还必须处理多个传输同时进行发生而导致的冲突问题，因为同时传输可能会干扰信号的接收。为了解决这个问题，802.11 采用了载波侦听多路访问（CSMA，Carrier Sense Multiple Access）。计算机在发送前等待一个随机时间间隔，如果听到别人已经在发送则推迟自己的发送。</p>

<p>另一个问题是移动性。随着客户的移动，他们可能会发现另 一个信号比他们目前正在使用的信号质量更好，于是改变自己与接入点的关联。</p>

<p>对于安全问题，802.11i 标准给出了不同的加密细节，这个方案也称为 WiFi 保护接入（WiFi Protected Access），初称为 WPA，现在更名为 WPA2。</p>

<h3 id="rfid-和传感器网络">RFID 和传感器网络</h3>

<p>无线射频识别（RFID，Radio Frequency IDentification）技术让日常物品也成为计算机网络的一部分。</p>

<p>操作所需要的全部能量来自 RFID 读写器提供的无线电波形式，称为无源 RFID（passive RFID）<br />
有源 RFID（active RFID），标签上有一个电源。</p>

<p>RFID 读写器必须以某种方式解决读写器范围内存在多个标签的问题：标签在用自己的标识符响应 RFID 读写器之前，等待一段随机的短时间，以便允许阅读器聚焦到单个标签，并进一步询问它们的信息。</p>

<h2 id="网络标准化">网络标准化</h2>

<h3 id="电信领域有影响力的组织">电信领域有影响力的组织</h3>

<p>国际电信联盟（ITU，International Telecommunication Union）对国际电信进行标准化。</p>

<p>ITU 有三个主要部门。 <br />
ITU-T是电信标准化部门，主要关注电话和数据通信系统。<br />
ITU-R 是无线电通信部门，协调全球无线电频率利益集团之间的竞争使用。 <br />
ITU-D，即发展部门，它的主要任务是促进信息和通信技术的发展，以便缩小有效获取信息技术的国家和访问受到限制的国家之间的“数字鸿沟”。</p>

<h3 id="国际标准领域有影响力的组织">国际标准领域有影响力的组织</h3>

<p>国际标准化组织（ISO，International Standards Organization）制定和发布国际标准。在有关电信标准方面，ISO 和 ITU-T 合作。</p>

<p>在标准化领域中另一个有很大影响的组织是电气和电子工程师协会（IEEE，Institute of Electrical and Electronics Engineers），它是世界上大的专业组织。</p>

<h3 id="internet-标准领域有影响力的组织">Internet 标准领域有影响力的组织</h3>

<p><img src="\images\image-20191114151239435.png" alt="image-20191114151239435" /></p>

<p>缩写词 IAB 后来改为 Internet 体系结构委员会（Internet Architecture Board）。当需要一个新的标准时，IAB 成员就会研究出对应的新标准，然后宣布新标准带来的变化。这里的交流过程是通过一系列技术报告进行的，这些报告统称为请求注释（RFC，Request For Comments）。</p>

<p>对于 Web 标准，万维网联盟（W3C，World Wide Web Consortium）负责开发协议和给 出促进 Web 长期增长的指导意见。</p>

<h2 id="度量单位">度量单位</h2>

<p>为了避免二义性，我们将使用符号 KB、MB、GB 和 TB 分别代表 $2^{10},2^{20},2^{30},2^{40}$字节；用符号 kbps、 Mbps、Gbps 和 Tbps 分别代表 $10^3,10^6,10^9,10^{12}$位/秒。</p>
